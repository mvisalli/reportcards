---
title: "Carnival Imagination: AIS Data June 2019"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

[MMSI: 309933000](https://www.marinetraffic.com/en/ais/details/ships/shipid:370651/mmsi:309933000/imo:9053878/vessel:CARNIVAL_IMAGINATION)  
1 June 2019 - 2 June 2019  
[View Cruise Itinerary](http://crew-center.com/carnival-imagination-itinerary)

```{r, echo=FALSE, message=FALSE}
#install.packages('devtools')
library(tidyverse)
library(devtools)
#devtools::install_github("mvisalli/shipr")
library(shipr)
library(leaflet)
library(sf)
library(dplyr)
library(lubridate)
library(readr)


sbais_ci<-readRDS("data/sbais_ci.RDS") %>% 
  arrange(datetime) %>%
  filter(!duplicated(round_date(datetime, unit="minute"))) %>% 
  st_as_sf(coords=c("lon","lat"), crs = 4326)

bins_ci <- c(0,10,11,12,15,20)

pal_ci <- colorBin( "YlOrRd",
                    domain= sbais_ci$speed,
                    bins = bins_ci,
                    na.color = 'black')

map_ci <- leaflet() %>%
  addTiles() %>%
  addCircleMarkers(data=sbais_ci,
                   radius = 0.5,
                   label = ~sprintf("%f knots - %s",speed,datetime),
                   color=~pal_ci(speed))
map_ci
```


